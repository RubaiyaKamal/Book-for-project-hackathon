(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{8965:function(e,r,t){Promise.resolve().then(t.bind(t,2078))},2078:function(e,r,t){"use strict";t.d(r,{default:function(){return d}});var a=t(7437),o=t(2265),n=t(1618),s=t(9376);function d(){let e=(0,s.useRouter)(),{login:r}=(0,n.a)(),[t,d]=(0,o.useState)(1),[l,i]=(0,o.useState)(!1),[c,u]=(0,o.useState)(""),[b,g]=(0,o.useState)({email:"",password:"",name:""}),[m,x]=(0,o.useState)({software_experience:"",hardware_experience:"",interests:[]}),h=async t=>{console.log("handleFinalSubmit triggered"),t.preventDefault(),i(!0),u("");try{let t={email:b.email,password:b.password,software_experience:m.software_experience,hardware_experience:m.hardware_experience,interests:m.interests},a=await fetch("http://127.0.0.1:8000/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("Signup API response status:",a.status),!a.ok){let e=await a.json();throw console.error("Signup API error data:",e),Error(e.detail||"Signup failed")}console.log("Signup API success.");let o=await fetch("http://127.0.0.1:8000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b.email,password:b.password})});if(console.log("Auto-login API response status:",o.status),o.ok){let t=await o.json();console.log("Auto-login API success data:",t);let a=await r(t.access_token);a?(console.error("Auto-login failed:",a),e.push("/signin")):e.push("/book")}else console.error("Auto-login API failed."),e.push("/signin")}catch(e){u(e.message||"Signup failed")}finally{i(!1)}},p=e=>{m.interests.includes(e)?x({...m,interests:m.interests.filter(r=>r!==e)}):x({...m,interests:[...m.interests,e]})};return 1===t?(0,a.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-cream dark:bg-dark-brown rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-dark-brown dark:text-cream",children:"Create Your Account"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d(2)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-dark-brown dark:text-cream",children:"Name"}),(0,a.jsx)("input",{type:"text",value:b.name,onChange:e=>g({...b,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-brown/30 rounded-lg focus:ring-2 focus:ring-goldenrod bg-white dark:bg-dark-brown/50 text-dark-brown dark:text-cream",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-dark-brown dark:text-cream",children:"Email"}),(0,a.jsx)("input",{type:"email",value:b.email,onChange:e=>g({...b,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-brown/30 rounded-lg focus:ring-2 focus:ring-goldenrod bg-white dark:bg-dark-brown/50 text-dark-brown dark:text-cream",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-dark-brown dark:text-cream",children:"Password"}),(0,a.jsx)("input",{type:"password",value:b.password,onChange:e=>g({...b,password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-brown/30 rounded-lg focus:ring-2 focus:ring-goldenrod bg-white dark:bg-dark-brown/50 text-dark-brown dark:text-cream",required:!0,minLength:8})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-goldenrod dark:bg-goldenrod text-dark-brown dark:text-dark-brown py-2 rounded-lg hover:bg-goldenrod/90 dark:hover:bg-goldenrod/80 font-semibold",children:"Continue"})]})]}):(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-cream dark:bg-dark-brown rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2 text-dark-brown dark:text-cream",children:"Tell Us About Yourself"}),(0,a.jsx)("p",{className:"text-dark-brown/70 dark:text-cream/70 mb-6",children:"This helps us personalize your learning experience"}),c&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-200 rounded",children:c}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border-b border-gray-300 dark:border-dark-brown/30 pb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-dark-brown dark:text-cream",children:"Software Experience"}),(0,a.jsxs)("select",{value:m.software_experience,onChange:e=>x({...m,software_experience:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-brown/30 rounded-lg bg-white dark:bg-dark-brown/50 text-dark-brown dark:text-cream focus:ring-2 focus:ring-goldenrod",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select level"}),(0,a.jsx)("option",{value:"beginner",children:"Beginner"}),(0,a.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,a.jsx)("option",{value:"expert",children:"Expert"})]})]}),(0,a.jsxs)("div",{className:"border-b border-gray-300 dark:border-dark-brown/30 pb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-dark-brown dark:text-cream",children:"Hardware Experience"}),(0,a.jsxs)("select",{value:m.hardware_experience,onChange:e=>x({...m,hardware_experience:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-brown/30 rounded-lg bg-white dark:bg-dark-brown/50 text-dark-brown dark:text-cream focus:ring-2 focus:ring-goldenrod",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select level"}),(0,a.jsx)("option",{value:"none",children:"None"}),(0,a.jsx)("option",{value:"arduino",children:"Arduino"}),(0,a.jsx)("option",{value:"raspberry_pi",children:"Raspberry Pi"}),(0,a.jsx)("option",{value:"professional",children:"Professional Robotics"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-dark-brown dark:text-cream",children:"Interests"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["ROS","Computer Vision","Reinforcement Learning","Simulations","Hardware Design"].map(e=>(0,a.jsxs)("label",{className:"flex items-center text-dark-brown dark:text-cream",children:[(0,a.jsx)("input",{type:"checkbox",checked:m.interests.includes(e),onChange:()=>p(e),className:"mr-2"}),e]},e))})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>d(1),className:"w-1/3 px-4 py-3 border border-gray-300 dark:border-dark-brown/30 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-brown/30 text-dark-brown dark:text-cream",children:"Back"}),(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-2/3 bg-mint dark:bg-mint text-white py-3 rounded-lg hover:bg-mint/90 dark:hover:bg-mint/80 font-semibold disabled:bg-gray-400 dark:disabled:bg-gray-600",children:l?"Creating Account...":"Complete Setup"})]})]})]})}},1618:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return l},a:function(){return d}});var a=t(7437),o=t(2265),n=t(9376);let s=(0,o.createContext)({user:null,isAuthenticated:!1,loading:!0,login:async()=>"Not implemented",logout:()=>{}}),d=()=>(0,o.useContext)(s);function l(e){let{children:r}=e,[t,d]=(0,o.useState)(null),[l,i]=(0,o.useState)(!0),c=(0,n.useRouter)();(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(e)try{let r=await fetch("http://127.0.0.1:8001/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();d(e)}else localStorage.removeItem("token")}catch(e){console.error("Auth check failed",e)}i(!1)})()},[]);let u=async e=>{localStorage.setItem("token",e);try{console.log("Fetching profile with token:",e.substring(0,10)+"...");let r=await fetch("http://127.0.0.1:8001/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();return d(e),c.push("/dashboard"),null}{let e=r.status,t=await r.text();return console.error("Login fetch failed:",e,t),"Profile load failed: ".concat(e," ").concat(t)}}catch(e){return console.error("Login fetch failed",e),"Network error: ".concat(e.message)}};return(0,a.jsx)(s.Provider,{value:{user:t,isAuthenticated:!!t,loading:l,login:u,logout:()=>{localStorage.removeItem("token"),d(null),c.push("/signin")}},children:r})}},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8965)}),_N_E=e.O()}]);