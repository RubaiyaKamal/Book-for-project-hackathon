"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/personalize/route";
exports.ids = ["app/api/personalize/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpersonalize%2Froute&page=%2Fapi%2Fpersonalize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpersonalize%2Froute.ts&appDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpersonalize%2Froute&page=%2Fapi%2Fpersonalize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpersonalize%2Froute.ts&appDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_PIAIC_hello_world_gemini_Book_for_project_hackathon_auth_app_app_api_personalize_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/personalize/route.ts */ \"(rsc)/./app/api/personalize/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/personalize/route\",\n        pathname: \"/api/personalize\",\n        filename: \"route\",\n        bundlePath: \"app/api/personalize/route\"\n    },\n    resolvedPagePath: \"E:\\\\PIAIC\\\\hello-world-gemini\\\\Book-for-project-hackathon\\\\auth-app\\\\app\\\\api\\\\personalize\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_PIAIC_hello_world_gemini_Book_for_project_hackathon_auth_app_app_api_personalize_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/personalize/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwZXJzb25hbGl6ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcGVyc29uYWxpemUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwZXJzb25hbGl6ZSUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDUElBSUMlNUNoZWxsby13b3JsZC1nZW1pbmklNUNCb29rLWZvci1wcm9qZWN0LWhhY2thdGhvbiU1Q2F1dGgtYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1FJTNBJTVDUElBSUMlNUNoZWxsby13b3JsZC1nZW1pbmklNUNCb29rLWZvci1wcm9qZWN0LWhhY2thdGhvbiU1Q2F1dGgtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvRDtBQUNqSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dGgtYXBwLz8zODlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkU6XFxcXFBJQUlDXFxcXGhlbGxvLXdvcmxkLWdlbWluaVxcXFxCb29rLWZvci1wcm9qZWN0LWhhY2thdGhvblxcXFxhdXRoLWFwcFxcXFxhcHBcXFxcYXBpXFxcXHBlcnNvbmFsaXplXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wZXJzb25hbGl6ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BlcnNvbmFsaXplXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wZXJzb25hbGl6ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkU6XFxcXFBJQUlDXFxcXGhlbGxvLXdvcmxkLWdlbWluaVxcXFxCb29rLWZvci1wcm9qZWN0LWhhY2thdGhvblxcXFxhdXRoLWFwcFxcXFxhcHBcXFxcYXBpXFxcXHBlcnNvbmFsaXplXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wZXJzb25hbGl6ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpersonalize%2Froute&page=%2Fapi%2Fpersonalize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpersonalize%2Froute.ts&appDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/personalize/route.ts":
/*!**************************************!*\
  !*** ./app/api/personalize/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_personalization__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/personalization */ \"(rsc)/./lib/personalization.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_profile_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/profile-store */ \"(rsc)/./lib/profile-store.ts\");\n\n\n\n\n\nasync function POST(req) {\n    try {\n        // Get session from Better Auth\n        const session = await _lib_auth__WEBPACK_IMPORTED_MODULE_2__.auth.api.getSession({\n            headers: await (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.headers)()\n        });\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Fetch user profile from profile store\n        let simpleProfile = await _lib_profile_store__WEBPACK_IMPORTED_MODULE_4__.profileStore.get(session.user.id);\n        // If profile doesn't exist, create a default one\n        if (!simpleProfile) {\n            console.log(\"Profile not found for user:\", session.user.id, \"- creating default profile\");\n            const defaultProfile = {\n                software_experience: \"intermediate\",\n                hardware_experience: \"arduino\",\n                interests: []\n            };\n            simpleProfile = await _lib_profile_store__WEBPACK_IMPORTED_MODULE_4__.profileStore.set(session.user.id, defaultProfile);\n        }\n        const { chapterId, originalContent } = await req.json();\n        if (!chapterId || !originalContent) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing chapterId or originalContent\"\n            }, {\n                status: 400\n            });\n        }\n        // Convert simple profile to full profile for PersonalizationEngine\n        // Map the simple profile fields to the expected complex profile structure\n        const fullProfile = {\n            programming_experience: simpleProfile.software_experience || \"intermediate\",\n            known_languages: [\n                \"python\"\n            ],\n            ml_experience: \"basic\",\n            ros_experience: \"none\",\n            robotics_experience: simpleProfile.hardware_experience === \"none\" ? \"none\" : \"hobbyist\",\n            electronics_knowledge: simpleProfile.hardware_experience || \"basic\",\n            has_robot_hardware: simpleProfile.hardware_experience !== \"none\",\n            hardware_platforms: simpleProfile.hardware_experience !== \"none\" ? [\n                simpleProfile.hardware_experience\n            ] : [],\n            learning_style: \"mixed\",\n            preferred_pace: \"normal\",\n            goals: simpleProfile.interests || []\n        };\n        // Generate personalized content using OpenAI\n        const personalizedContent = await generatePersonalizedContent(originalContent, simpleProfile // Use simple profile for the prompt\n        );\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            personalizedContent,\n            experienceLevel: simpleProfile.software_experience,\n            profile: {\n                difficulty: _lib_personalization__WEBPACK_IMPORTED_MODULE_1__.PersonalizationEngine.getContentDifficulty(fullProfile),\n                interests: simpleProfile.interests || [],\n                hardwareExperience: simpleProfile.hardware_experience\n            }\n        });\n    } catch (error) {\n        console.error(\"Personalization error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to personalize content\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function generatePersonalizedContent(originalContent, profile) {\n    const prompt = _lib_personalization__WEBPACK_IMPORTED_MODULE_1__.PersonalizationEngine.getPersonalizationPrompt(profile, originalContent);\n    // Call OpenAI to personalize content\n    const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${process.env.OPENAI_API_KEY}`\n        },\n        body: JSON.stringify({\n            model: \"gpt-4o-mini\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.7,\n            max_tokens: 4000\n        })\n    });\n    if (!response.ok) {\n        const errorDetails = await response.text();\n        throw new Error(`OpenAI API error: ${response.statusText}. Details: ${errorDetails}`);\n    }\n    const data = await response.json();\n    return data.choices[0].message.content;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNSL0MsU0FBUztZQUNMLGdCQUFnQjtZQUNoQmdELGVBQWUsQ0FBQyxPQUFPLEVBQUVDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxDQUFDLENBQUM7UUFDekQ7UUFDQUMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO1lBQ2pCQyxPQUFPO1lBQ1BDLFVBQVU7Z0JBQ047b0JBQ0lDLE1BQU07b0JBQ05DLFNBQVNmO2dCQUNiO2FBQ0g7WUFDRGdCLGFBQWE7WUFDYkMsWUFBWTtRQUNoQjtJQUNKO0lBRUEsSUFBSSxDQUFDZixTQUFTZ0IsRUFBRSxFQUFFO1FBQ2QsTUFBTUMsZUFBZSxNQUFNakIsU0FBU2tCLElBQUk7UUFDeEMsTUFBTSxJQUFJQyxNQUFNLENBQUMsa0JBQWtCLEVBQUVuQixTQUFTb0IsVUFBVSxDQUFDLFdBQVcsRUFBRUgsYUFBYSxDQUFDO0lBQ3hGO0lBRUEsTUFBTUksT0FBTyxNQUFNckIsU0FBU3RDLElBQUk7SUFDaEMsT0FBTzJELEtBQUtDLE9BQU8sQ0FBQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ1YsT0FBTztBQUMxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dGgtYXBwLy4vYXBwL2FwaS9wZXJzb25hbGl6ZS9yb3V0ZS50cz85NDRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgUGVyc29uYWxpemF0aW9uRW5naW5lIH0gZnJvbSBcIkAvbGliL3BlcnNvbmFsaXphdGlvblwiO1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIkAvbGliL2F1dGhcIjtcclxuaW1wb3J0IHsgaGVhZGVycyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcclxuaW1wb3J0IHsgcHJvZmlsZVN0b3JlIH0gZnJvbSBcIkAvbGliL3Byb2ZpbGUtc3RvcmVcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gR2V0IHNlc3Npb24gZnJvbSBCZXR0ZXIgQXV0aFxyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBhdXRoLmFwaS5nZXRTZXNzaW9uKHtcclxuICAgICAgICAgICAgaGVhZGVyczogYXdhaXQgaGVhZGVycygpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghc2Vzc2lvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmV0Y2ggdXNlciBwcm9maWxlIGZyb20gcHJvZmlsZSBzdG9yZVxyXG4gICAgICAgIGxldCBzaW1wbGVQcm9maWxlID0gYXdhaXQgcHJvZmlsZVN0b3JlLmdldChzZXNzaW9uLnVzZXIuaWQpO1xyXG5cclxuICAgICAgICAvLyBJZiBwcm9maWxlIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBhIGRlZmF1bHQgb25lXHJcbiAgICAgICAgaWYgKCFzaW1wbGVQcm9maWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUHJvZmlsZSBub3QgZm91bmQgZm9yIHVzZXI6XCIsIHNlc3Npb24udXNlci5pZCwgXCItIGNyZWF0aW5nIGRlZmF1bHQgcHJvZmlsZVwiKTtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFByb2ZpbGUgPSB7XHJcbiAgICAgICAgICAgICAgICBzb2Z0d2FyZV9leHBlcmllbmNlOiBcImludGVybWVkaWF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgaGFyZHdhcmVfZXhwZXJpZW5jZTogXCJhcmR1aW5vXCIsXHJcbiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IFtdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNpbXBsZVByb2ZpbGUgPSBhd2FpdCBwcm9maWxlU3RvcmUuc2V0KHNlc3Npb24udXNlci5pZCwgZGVmYXVsdFByb2ZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeyBjaGFwdGVySWQsIG9yaWdpbmFsQ29udGVudCB9ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuXHJcbiAgICAgICAgaWYgKCFjaGFwdGVySWQgfHwgIW9yaWdpbmFsQ29udGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiBcIk1pc3NpbmcgY2hhcHRlcklkIG9yIG9yaWdpbmFsQ29udGVudFwiIH0sXHJcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbnZlcnQgc2ltcGxlIHByb2ZpbGUgdG8gZnVsbCBwcm9maWxlIGZvciBQZXJzb25hbGl6YXRpb25FbmdpbmVcclxuICAgICAgICAvLyBNYXAgdGhlIHNpbXBsZSBwcm9maWxlIGZpZWxkcyB0byB0aGUgZXhwZWN0ZWQgY29tcGxleCBwcm9maWxlIHN0cnVjdHVyZVxyXG4gICAgICAgIGNvbnN0IGZ1bGxQcm9maWxlID0ge1xyXG4gICAgICAgICAgICBwcm9ncmFtbWluZ19leHBlcmllbmNlOiBzaW1wbGVQcm9maWxlLnNvZnR3YXJlX2V4cGVyaWVuY2UgfHwgXCJpbnRlcm1lZGlhdGVcIixcclxuICAgICAgICAgICAga25vd25fbGFuZ3VhZ2VzOiBbXCJweXRob25cIl0sIC8vIERlZmF1bHRcclxuICAgICAgICAgICAgbWxfZXhwZXJpZW5jZTogXCJiYXNpY1wiLCAvLyBEZWZhdWx0XHJcbiAgICAgICAgICAgIHJvc19leHBlcmllbmNlOiBcIm5vbmVcIiwgLy8gRGVmYXVsdFxyXG4gICAgICAgICAgICByb2JvdGljc19leHBlcmllbmNlOiBzaW1wbGVQcm9maWxlLmhhcmR3YXJlX2V4cGVyaWVuY2UgPT09IFwibm9uZVwiID8gXCJub25lXCIgOiBcImhvYmJ5aXN0XCIsXHJcbiAgICAgICAgICAgIGVsZWN0cm9uaWNzX2tub3dsZWRnZTogc2ltcGxlUHJvZmlsZS5oYXJkd2FyZV9leHBlcmllbmNlIHx8IFwiYmFzaWNcIixcclxuICAgICAgICAgICAgaGFzX3JvYm90X2hhcmR3YXJlOiBzaW1wbGVQcm9maWxlLmhhcmR3YXJlX2V4cGVyaWVuY2UgIT09IFwibm9uZVwiLFxyXG4gICAgICAgICAgICBoYXJkd2FyZV9wbGF0Zm9ybXM6IHNpbXBsZVByb2ZpbGUuaGFyZHdhcmVfZXhwZXJpZW5jZSAhPT0gXCJub25lXCIgPyBbc2ltcGxlUHJvZmlsZS5oYXJkd2FyZV9leHBlcmllbmNlXSA6IFtdLFxyXG4gICAgICAgICAgICBsZWFybmluZ19zdHlsZTogXCJtaXhlZFwiLCAvLyBEZWZhdWx0XHJcbiAgICAgICAgICAgIHByZWZlcnJlZF9wYWNlOiBcIm5vcm1hbFwiLCAvLyBEZWZhdWx0XHJcbiAgICAgICAgICAgIGdvYWxzOiBzaW1wbGVQcm9maWxlLmludGVyZXN0cyB8fCBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIHBlcnNvbmFsaXplZCBjb250ZW50IHVzaW5nIE9wZW5BSVxyXG4gICAgICAgIGNvbnN0IHBlcnNvbmFsaXplZENvbnRlbnQgPSBhd2FpdCBnZW5lcmF0ZVBlcnNvbmFsaXplZENvbnRlbnQoXHJcbiAgICAgICAgICAgIG9yaWdpbmFsQ29udGVudCxcclxuICAgICAgICAgICAgc2ltcGxlUHJvZmlsZSAvLyBVc2Ugc2ltcGxlIHByb2ZpbGUgZm9yIHRoZSBwcm9tcHRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBwZXJzb25hbGl6ZWRDb250ZW50LFxyXG4gICAgICAgICAgICBleHBlcmllbmNlTGV2ZWw6IHNpbXBsZVByb2ZpbGUuc29mdHdhcmVfZXhwZXJpZW5jZSwgLy8gUmV0dXJuIGV4cGVyaWVuY2UgbGV2ZWwgZm9yIFVJIGJhZGdlXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IHtcclxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IFBlcnNvbmFsaXphdGlvbkVuZ2luZS5nZXRDb250ZW50RGlmZmljdWx0eShmdWxsUHJvZmlsZSksXHJcbiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IHNpbXBsZVByb2ZpbGUuaW50ZXJlc3RzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgaGFyZHdhcmVFeHBlcmllbmNlOiBzaW1wbGVQcm9maWxlLmhhcmR3YXJlX2V4cGVyaWVuY2UsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQZXJzb25hbGl6YXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHsgZXJyb3I6IFwiRmFpbGVkIHRvIHBlcnNvbmFsaXplIGNvbnRlbnRcIiB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVBlcnNvbmFsaXplZENvbnRlbnQoXHJcbiAgICBvcmlnaW5hbENvbnRlbnQ6IHN0cmluZyxcclxuICAgIHByb2ZpbGU6IGFueVxyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgcHJvbXB0ID0gUGVyc29uYWxpemF0aW9uRW5naW5lLmdldFBlcnNvbmFsaXphdGlvblByb21wdChwcm9maWxlLCBvcmlnaW5hbENvbnRlbnQpO1xyXG5cclxuICAgIC8vIENhbGwgT3BlbkFJIHRvIHBlcnNvbmFsaXplIGNvbnRlbnRcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NoYXQvY29tcGxldGlvbnNcIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Byb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZfWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIG1vZGVsOiBcImdwdC00by1taW5pXCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcHJvbXB0LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcclxuICAgICAgICAgICAgbWF4X3Rva2VuczogNDAwMCxcclxuICAgICAgICB9KSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvckRldGFpbHMgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcGVuQUkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBEZXRhaWxzOiAke2Vycm9yRGV0YWlsc31gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgcmV0dXJuIGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlBlcnNvbmFsaXphdGlvbkVuZ2luZSIsImF1dGgiLCJoZWFkZXJzIiwicHJvZmlsZVN0b3JlIiwiUE9TVCIsInJlcSIsInNlc3Npb24iLCJhcGkiLCJnZXRTZXNzaW9uIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic2ltcGxlUHJvZmlsZSIsImdldCIsInVzZXIiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJkZWZhdWx0UHJvZmlsZSIsInNvZnR3YXJlX2V4cGVyaWVuY2UiLCJoYXJkd2FyZV9leHBlcmllbmNlIiwiaW50ZXJlc3RzIiwic2V0IiwiY2hhcHRlcklkIiwib3JpZ2luYWxDb250ZW50IiwiZnVsbFByb2ZpbGUiLCJwcm9ncmFtbWluZ19leHBlcmllbmNlIiwia25vd25fbGFuZ3VhZ2VzIiwibWxfZXhwZXJpZW5jZSIsInJvc19leHBlcmllbmNlIiwicm9ib3RpY3NfZXhwZXJpZW5jZSIsImVsZWN0cm9uaWNzX2tub3dsZWRnZSIsImhhc19yb2JvdF9oYXJkd2FyZSIsImhhcmR3YXJlX3BsYXRmb3JtcyIsImxlYXJuaW5nX3N0eWxlIiwicHJlZmVycmVkX3BhY2UiLCJnb2FscyIsInBlcnNvbmFsaXplZENvbnRlbnQiLCJnZW5lcmF0ZVBlcnNvbmFsaXplZENvbnRlbnQiLCJzdWNjZXNzIiwiZXhwZXJpZW5jZUxldmVsIiwicHJvZmlsZSIsImRpZmZpY3VsdHkiLCJnZXRDb250ZW50RGlmZmljdWx0eSIsImhhcmR3YXJlRXhwZXJpZW5jZSIsInByb21wdCIsImdldFBlcnNvbmFsaXphdGlvblByb21wdCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJBdXRob3JpemF0aW9uIiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJvayIsImVycm9yRGV0YWlscyIsInRleHQiLCJFcnJvciIsInN0YXR1c1RleHQiLCJkYXRhIiwiY2hvaWNlcyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/personalize/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth)\n/* harmony export */ });\n/* harmony import */ var better_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-auth */ \"(rsc)/./node_modules/better-auth/dist/index.mjs\");\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.mjs\");\n\n\nconst pool = new _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_1__.Pool({\n    connectionString: process.env.NEON_DATABASE_URL\n});\n// Debug logging to verify environment variables\nconsole.log(\"--- Auth Configuration Check ---\");\nconsole.log(\"BETTER_AUTH_URL:\", process.env.BETTER_AUTH_URL);\nconsole.log(\"GOOGLE_CLIENT_ID:\", process.env.GOOGLE_CLIENT_ID ? \"Set\" : \"Missing\");\nconsole.log(\"GITHUB_CLIENT_ID:\", process.env.GITHUB_CLIENT_ID ? \"Set\" : \"Missing\");\nconst auth = (0,better_auth__WEBPACK_IMPORTED_MODULE_0__.betterAuth)({\n    database: pool,\n    baseURL: process.env.BETTER_AUTH_URL,\n    trustedOrigins: [\n        \"http://localhost:3000\",\n        \"http://localhost:3001\",\n        \"http://localhost:3002\",\n        process.env.BETTER_AUTH_URL || \"\",\n        \"http://localhost:3001\" || 0\n    ].filter(Boolean),\n    emailAndPassword: {\n        enabled: true\n    },\n    socialProviders: {\n        google: {\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        },\n        github: {\n            clientId: process.env.GITHUB_CLIENT_ID,\n            clientSecret: process.env.GITHUB_CLIENT_SECRET\n        }\n    },\n    session: {\n        expiresIn: 60 * 60 * 24 * 7,\n        updateAge: 60 * 60 * 24\n    },\n    user: {\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUM7QUFDTztBQUVoRCxNQUFNRSxPQUFPLElBQUlELDBEQUFJQSxDQUFDO0lBQ2xCRSxrQkFBa0JDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCO0FBQ25EO0FBRUEsZ0RBQWdEO0FBQ2hEQyxRQUFRQyxHQUFHLENBQUM7QUFDWkQsUUFBUUMsR0FBRyxDQUFDLG9CQUFvQkosUUFBUUMsR0FBRyxDQUFDSSxlQUFlO0FBQzNERixRQUFRQyxHQUFHLENBQUMscUJBQXFCSixRQUFRQyxHQUFHLENBQUNLLGdCQUFnQixHQUFHLFFBQVE7QUFDeEVILFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJKLFFBQVFDLEdBQUcsQ0FBQ00sZ0JBQWdCLEdBQUcsUUFBUTtBQUVqRSxNQUFNQyxPQUFPWix1REFBVUEsQ0FBQztJQUMzQmEsVUFBVVg7SUFDVlksU0FBU1YsUUFBUUMsR0FBRyxDQUFDSSxlQUFlO0lBQ3BDTSxnQkFBZ0I7UUFDWjtRQUNBO1FBQ0E7UUFDQVgsUUFBUUMsR0FBRyxDQUFDSSxlQUFlLElBQUk7UUFDL0JMLHVCQUErQixJQUFJLENBQUU7S0FDeEMsQ0FBQ2EsTUFBTSxDQUFDQztJQUNUQyxrQkFBa0I7UUFDZEMsU0FBUztJQUNiO0lBQ0FDLGlCQUFpQjtRQUNiQyxRQUFRO1lBQ0pDLFVBQVVuQixRQUFRQyxHQUFHLENBQUNLLGdCQUFnQjtZQUN0Q2MsY0FBY3BCLFFBQVFDLEdBQUcsQ0FBQ29CLG9CQUFvQjtRQUNsRDtRQUNBQyxRQUFRO1lBQ0pILFVBQVVuQixRQUFRQyxHQUFHLENBQUNNLGdCQUFnQjtZQUN0Q2EsY0FBY3BCLFFBQVFDLEdBQUcsQ0FBQ3NCLG9CQUFvQjtRQUNsRDtJQUNKO0lBQ0FDLFNBQVM7UUFDTEMsV0FBVyxLQUFLLEtBQUssS0FBSztRQUMxQkMsV0FBVyxLQUFLLEtBQUs7SUFDekI7SUFDQUMsTUFBTTtJQUVOO0FBQ0osR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dGgtYXBwLy4vbGliL2F1dGgudHM/YmY3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcImJldHRlci1hdXRoXCI7XHJcbmltcG9ydCB7IFBvb2wgfSBmcm9tIFwiQG5lb25kYXRhYmFzZS9zZXJ2ZXJsZXNzXCI7XHJcblxyXG5jb25zdCBwb29sID0gbmV3IFBvb2woe1xyXG4gICAgY29ubmVjdGlvblN0cmluZzogcHJvY2Vzcy5lbnYuTkVPTl9EQVRBQkFTRV9VUkwsXHJcbn0pO1xyXG5cclxuLy8gRGVidWcgbG9nZ2luZyB0byB2ZXJpZnkgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbmNvbnNvbGUubG9nKFwiLS0tIEF1dGggQ29uZmlndXJhdGlvbiBDaGVjayAtLS1cIik7XHJcbmNvbnNvbGUubG9nKFwiQkVUVEVSX0FVVEhfVVJMOlwiLCBwcm9jZXNzLmVudi5CRVRURVJfQVVUSF9VUkwpO1xyXG5jb25zb2xlLmxvZyhcIkdPT0dMRV9DTElFTlRfSUQ6XCIsIHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgPyBcIlNldFwiIDogXCJNaXNzaW5nXCIpO1xyXG5jb25zb2xlLmxvZyhcIkdJVEhVQl9DTElFTlRfSUQ6XCIsIHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfSUQgPyBcIlNldFwiIDogXCJNaXNzaW5nXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGggPSBiZXR0ZXJBdXRoKHtcclxuICAgIGRhdGFiYXNlOiBwb29sLFxyXG4gICAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuQkVUVEVSX0FVVEhfVVJMLCAvLyBFeHBsaWNpdGx5IHNldCBiYXNlIFVSTFxyXG4gICAgdHJ1c3RlZE9yaWdpbnM6IFtcclxuICAgICAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiLFxyXG4gICAgICAgIFwiaHR0cDovL2xvY2FsaG9zdDozMDAxXCIsIC8vIEluIGNhc2UgeW91IHJ1biBvbiBkaWZmZXJlbnQgcG9ydFxyXG4gICAgICAgIFwiaHR0cDovL2xvY2FsaG9zdDozMDAyXCIsIC8vIEN1cnJlbnQgcnVubmluZyBwb3J0XHJcbiAgICAgICAgcHJvY2Vzcy5lbnYuQkVUVEVSX0FVVEhfVVJMIHx8IFwiXCIsXHJcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCBcIlwiLFxyXG4gICAgXS5maWx0ZXIoQm9vbGVhbiksIC8vIFJlbW92ZSBlbXB0eSBzdHJpbmdzXHJcbiAgICBlbWFpbEFuZFBhc3N3b3JkOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBzb2NpYWxQcm92aWRlcnM6IHtcclxuICAgICAgICBnb29nbGU6IHtcclxuICAgICAgICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQhLFxyXG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUISxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdpdGh1Yjoge1xyXG4gICAgICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9JRCEsXHJcbiAgICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9TRUNSRVQhLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgc2Vzc2lvbjoge1xyXG4gICAgICAgIGV4cGlyZXNJbjogNjAgKiA2MCAqIDI0ICogNywgLy8gNyBkYXlzXHJcbiAgICAgICAgdXBkYXRlQWdlOiA2MCAqIDYwICogMjQsIC8vIDEgZGF5XHJcbiAgICB9LFxyXG4gICAgdXNlcjoge1xyXG4gICAgICAgIC8vIFdlJ2xsIHN0b3JlIGFkZGl0aW9uYWwgZGF0YSBpbiB1c2VyX3Byb2ZpbGVzIHRhYmxlXHJcbiAgICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCB0eXBlIFNlc3Npb24gPSB0eXBlb2YgYXV0aC4kSW5mZXIuU2Vzc2lvbjtcclxuIl0sIm5hbWVzIjpbImJldHRlckF1dGgiLCJQb29sIiwicG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiTkVPTl9EQVRBQkFTRV9VUkwiLCJjb25zb2xlIiwibG9nIiwiQkVUVEVSX0FVVEhfVVJMIiwiR09PR0xFX0NMSUVOVF9JRCIsIkdJVEhVQl9DTElFTlRfSUQiLCJhdXRoIiwiZGF0YWJhc2UiLCJiYXNlVVJMIiwidHJ1c3RlZE9yaWdpbnMiLCJORVhUX1BVQkxJQ19BUFBfVVJMIiwiZmlsdGVyIiwiQm9vbGVhbiIsImVtYWlsQW5kUGFzc3dvcmQiLCJlbmFibGVkIiwic29jaWFsUHJvdmlkZXJzIiwiZ29vZ2xlIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsImdpdGh1YiIsIkdJVEhVQl9DTElFTlRfU0VDUkVUIiwic2Vzc2lvbiIsImV4cGlyZXNJbiIsInVwZGF0ZUFnZSIsInVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/personalization.ts":
/*!********************************!*\
  !*** ./lib/personalization.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PersonalizationEngine: () => (/* binding */ PersonalizationEngine)\n/* harmony export */ });\nclass PersonalizationEngine {\n    /**\r\n     * Get recommended chapters based on user profile\r\n     */ static getRecommendedChapters(profile) {\n        const recommendations = [];\n        // Beginners start from basics\n        if (profile.programming_experience === \"beginner\") {\n            recommendations.push({\n                chapterId: \"module-01/chapter-01\",\n                reason: \"Start with fundamentals\",\n                priority: 10\n            });\n            recommendations.push({\n                chapterId: \"module-02/chapter-01\",\n                reason: \"Learn programming basics\",\n                priority: 9\n            });\n        }\n        // Advanced users skip to specialized topics\n        if (profile.programming_experience === \"advanced\" || profile.programming_experience === \"expert\") {\n            if (profile.ml_experience === \"none\" || profile.ml_experience === \"basic\") {\n                recommendations.push({\n                    chapterId: \"module-05/chapter-01\",\n                    reason: \"Build ML skills for robotics\",\n                    priority: 10\n                });\n            }\n            if (profile.ros_experience === \"none\") {\n                recommendations.push({\n                    chapterId: \"module-02/chapter-04\",\n                    reason: \"Learn ROS framework\",\n                    priority: 9\n                });\n            }\n        }\n        // Hardware owners get practical chapters\n        if (profile.has_robot_hardware) {\n            recommendations.push({\n                chapterId: \"module-03/chapter-01\",\n                reason: \"Work with your sensors\",\n                priority: 8\n            });\n            recommendations.push({\n                chapterId: \"module-04/chapter-01\",\n                reason: \"Control your actuators\",\n                priority: 8\n            });\n            recommendations.push({\n                chapterId: \"module-06/chapter-01\",\n                reason: \"Build humanoid robots\",\n                priority: 7\n            });\n        }\n        // Sort by priority\n        return recommendations.sort((a, b)=>b.priority - a.priority);\n    }\n    /**\r\n     * Determine content difficulty level\r\n     */ static getContentDifficulty(profile) {\n        const scores = {\n            beginner: 0,\n            intermediate: 0,\n            advanced: 0\n        };\n        // Programming experience (weight: 3)\n        if (profile.programming_experience === \"beginner\") scores.beginner += 3;\n        if (profile.programming_experience === \"intermediate\") scores.intermediate += 3;\n        if (profile.programming_experience === \"advanced\" || profile.programming_experience === \"expert\") scores.advanced += 3;\n        // ML experience (weight: 2)\n        if (profile.ml_experience === \"none\") scores.beginner += 2;\n        if (profile.ml_experience === \"basic\") scores.intermediate += 2;\n        if (profile.ml_experience === \"intermediate\" || profile.ml_experience === \"advanced\") scores.advanced += 2;\n        // ROS experience (weight: 2)\n        if (profile.ros_experience === \"none\") scores.beginner += 2;\n        if (profile.ros_experience === \"basic\") scores.intermediate += 2;\n        if (profile.ros_experience === \"intermediate\" || profile.ros_experience === \"advanced\") scores.advanced += 2;\n        // Robotics experience (weight: 1)\n        if (profile.robotics_experience === \"none\") scores.beginner += 1;\n        if (profile.robotics_experience === \"hobbyist\") scores.intermediate += 1;\n        if (profile.robotics_experience === \"professional\" || profile.robotics_experience === \"expert\") scores.advanced += 1;\n        // Find highest score\n        const maxScore = Math.max(scores.beginner, scores.intermediate, scores.advanced);\n        if (scores.advanced === maxScore) return \"advanced\";\n        if (scores.intermediate === maxScore) return \"intermediate\";\n        return \"beginner\";\n    }\n    /**\r\n     * Generate personalized chatbot system prompt\r\n     */ static getChatbotSystemPrompt(profile) {\n        const difficulty = this.getContentDifficulty(profile);\n        const knownLanguages = profile.known_languages.join(\", \");\n        let prompt = `You are an AI assistant for the 'Physical AI & Humanoid Robotics' textbook. `;\n        // Adjust based on experience level\n        if (difficulty === \"beginner\") {\n            prompt += `The user is a beginner. Provide detailed explanations with simple examples. `;\n            prompt += `Avoid assuming prior knowledge. Break down complex concepts step by step. `;\n            prompt += `Use analogies and real-world examples to explain abstract ideas. `;\n        } else if (difficulty === \"intermediate\") {\n            prompt += `The user has intermediate experience. Provide balanced explanations with practical examples. `;\n            prompt += `You can assume basic programming and robotics knowledge. `;\n            prompt += `Focus on practical applications and implementation details. `;\n        } else {\n            prompt += `The user is advanced. Provide concise, technical explanations. `;\n            prompt += `You can use advanced concepts, mathematical formulations, and technical jargon. `;\n            prompt += `Focus on optimization, edge cases, and advanced techniques. `;\n        }\n        // Language preferences\n        if (knownLanguages) {\n            prompt += `The user knows: ${knownLanguages}. Prefer code examples in these languages when possible. `;\n            if (profile.known_languages.includes(\"python\")) {\n                prompt += `Python is preferred for ML and high-level robotics code. `;\n            }\n            if (profile.known_languages.includes(\"c++\")) {\n                prompt += `C++ is preferred for performance-critical code. `;\n            }\n        }\n        // Learning style adaptation\n        if (profile.learning_style === \"visual\") {\n            prompt += `The user prefers visual learning. Suggest diagrams, flowcharts, and visualizations when relevant. `;\n            prompt += `Describe visual representations of concepts. `;\n        } else if (profile.learning_style === \"hands-on\") {\n            prompt += `The user prefers hands-on learning. Provide practical code examples and exercises. `;\n            prompt += `Suggest experiments and projects they can try. `;\n        } else if (profile.learning_style === \"theoretical\") {\n            prompt += `The user prefers theoretical understanding. Include mathematical formulations and formal definitions. `;\n            prompt += `Explain the underlying principles and theory. `;\n        } else {\n            prompt += `The user prefers a mixed approach. Balance theory, visuals, and practical examples. `;\n        }\n        // Pace adaptation\n        if (profile.preferred_pace === \"slow\") {\n            prompt += `The user prefers a slow, thorough pace. Provide comprehensive explanations with multiple examples. `;\n        } else if (profile.preferred_pace === \"fast\") {\n            prompt += `The user prefers a fast pace. Be concise and get to the point quickly. `;\n        }\n        // Hardware context\n        if (profile.has_robot_hardware) {\n            const platforms = profile.hardware_platforms.join(\", \");\n            prompt += `The user has robot hardware: ${platforms}. `;\n            prompt += `Provide practical implementation suggestions for their specific hardware. `;\n            prompt += `Include tips for debugging and troubleshooting on their platform. `;\n        } else {\n            prompt += `The user doesn't have robot hardware. Focus on simulation and theoretical understanding. `;\n            prompt += `Suggest simulation tools and virtual environments when relevant. `;\n        }\n        // Goals context\n        if (profile.goals.includes(\"career-change\")) {\n            prompt += `The user is pursuing a career change. Emphasize industry-relevant skills and best practices. `;\n        }\n        if (profile.goals.includes(\"startup-idea\")) {\n            prompt += `The user is working on a startup. Focus on practical, production-ready solutions. `;\n        }\n        if (profile.goals.includes(\"academic-research\")) {\n            prompt += `The user is in academic research. Include references to papers and cutting-edge techniques. `;\n        }\n        prompt += `\\n\\nWhen answering:\\n`;\n        prompt += `- Use double line breaks for readability\\n`;\n        prompt += `- Format code with proper syntax highlighting\\n`;\n        prompt += `- Use bullet points for lists\\n`;\n        prompt += `- Be helpful, clear, and encouraging\\n`;\n        return prompt;\n    }\n    /**\r\n     * Get personalized learning path\r\n     */ static getLearningPath(profile) {\n        const path = [];\n        const difficulty = this.getContentDifficulty(profile);\n        // Module 1: Always included\n        path.push({\n            module: \"Module 1: Introduction to Physical AI\",\n            chapters: [\n                \"chapter-01\",\n                \"chapter-02\",\n                \"chapter-03\"\n            ],\n            reason: \"Foundation concepts for everyone\",\n            estimatedHours: difficulty === \"beginner\" ? 6 : difficulty === \"intermediate\" ? 4 : 2\n        });\n        // Module 2: Adjust based on programming experience\n        if (profile.programming_experience === \"beginner\") {\n            path.push({\n                module: \"Module 2: Programming Fundamentals\",\n                chapters: [\n                    \"chapter-01\",\n                    \"chapter-02\",\n                    \"chapter-03\",\n                    \"chapter-04\"\n                ],\n                reason: \"Build essential programming skills\",\n                estimatedHours: 12\n            });\n        } else if (profile.ros_experience === \"none\") {\n            path.push({\n                module: \"Module 2: ROS Fundamentals\",\n                chapters: [\n                    \"chapter-04\"\n                ],\n                reason: \"Learn Robot Operating System\",\n                estimatedHours: 4\n            });\n        }\n        // Module 3: Sensors (especially for hardware owners)\n        if (profile.has_robot_hardware || profile.robotics_experience !== \"none\") {\n            path.push({\n                module: \"Module 3: Sensors and Perception\",\n                chapters: [\n                    \"chapter-01\",\n                    \"chapter-02\",\n                    \"chapter-03\"\n                ],\n                reason: profile.has_robot_hardware ? \"Work with your robot's sensors\" : \"Understand sensor systems\",\n                estimatedHours: 8\n            });\n        }\n        // Module 4: Actuators (for hardware owners)\n        if (profile.has_robot_hardware) {\n            path.push({\n                module: \"Module 4: Actuators and Control\",\n                chapters: [\n                    \"chapter-01\",\n                    \"chapter-02\",\n                    \"chapter-03\"\n                ],\n                reason: \"Control your robot's movements\",\n                estimatedHours: 8\n            });\n        }\n        // Module 5: ML (if needed)\n        if (profile.ml_experience === \"none\" || profile.ml_experience === \"basic\") {\n            path.push({\n                module: \"Module 5: AI and Machine Learning\",\n                chapters: [\n                    \"chapter-01\",\n                    \"chapter-02\",\n                    \"chapter-03\"\n                ],\n                reason: \"Learn ML fundamentals for robotics\",\n                estimatedHours: 10\n            });\n        } else {\n            path.push({\n                module: \"Module 5: Advanced ML for Robotics\",\n                chapters: [\n                    \"chapter-03\",\n                    \"chapter-04\"\n                ],\n                reason: \"Apply ML to robotics problems\",\n                estimatedHours: 6\n            });\n        }\n        // Module 6: Humanoid Robotics\n        if (profile.robotics_experience !== \"none\" || profile.goals.includes(\"startup-idea\") || profile.goals.includes(\"academic-research\")) {\n            path.push({\n                module: \"Module 6: Humanoid Robotics\",\n                chapters: [\n                    \"chapter-01\",\n                    \"chapter-02\",\n                    \"chapter-03\"\n                ],\n                reason: \"Advanced humanoid robot systems\",\n                estimatedHours: 10\n            });\n        }\n        return path;\n    }\n    /**\r\n     * Get next recommended chapter based on progress\r\n     */ static getNextChapter(profile, completedChapters) {\n        const learningPath = this.getLearningPath(profile);\n        for (const module of learningPath){\n            for (const chapter of module.chapters){\n                const chapterId = `${module.module.toLowerCase().replace(/\\s+/g, \"-\").split(\":\")[0]}/${chapter}`;\n                if (!completedChapters.includes(chapterId)) {\n                    return {\n                        chapterId,\n                        reason: `Continue with ${module.module}`\n                    };\n                }\n            }\n        }\n        return null; // All chapters completed\n    }\n    /**\r\n     * Generate personalization prompt for OpenAI\r\n     */ static getPersonalizationPrompt(profile, originalContent) {\n        const difficulty = this.getContentDifficulty(profile);\n        const interests = profile.interests || [];\n        const hardwareExp = profile.hardware_experience || \"none\";\n        const experienceLevel = profile.software_experience || \"intermediate\";\n        return `You are personalizing educational content for a student with the following profile:\r\n- Software Experience: ${experienceLevel}\r\n- Hardware Experience: ${hardwareExp}\r\n- Interests: ${interests.join(\", \") || \"General robotics\"}\r\n- Target Difficulty: ${difficulty}\r\n\r\nIMPORTANT INSTRUCTIONS:\r\n1. KEEP ALL ORIGINAL TEXT EXACTLY AS IS - Do not modify, rewrite, or remove any existing content\r\n2. ADD ONLY 2-3 RELEVANT EXAMPLES based on their ${experienceLevel} experience level\r\n3. Insert examples naturally after relevant sections in the content\r\n4. Mark each example clearly as: \" **Example for ${experienceLevel.charAt(0).toUpperCase() + experienceLevel.slice(1)}:** [your example here]\"\r\n5. Examples should be:\r\n   - Practical and relevant to their experience level\r\n   - Related to their interests: ${interests.join(\", \") || \"robotics\"}\r\n   ${hardwareExp !== \"none\" ? `- Include hardware-specific examples for ${hardwareExp}` : \"- Focus on simulation and theory\"}\r\n6. Keep the same markdown structure and headings\r\n7. Do not add any other personalization markers or modifications\r\n\r\nOriginal Content:\r\n${originalContent}\r\n\r\nReturn the content with ONLY the original text plus 2-3 added examples in markdown format.`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHQyxXQUFXLEtBQUtILGdCQUFnQkksS0FBSyxDQUFDLEdBQUc7OztpQ0FHdkYsRUFBRVAsVUFBVXRCLElBQUksQ0FBQyxTQUFTLFdBQVc7R0FDbkUsRUFBRXVCLGdCQUFnQixTQUFTLENBQUMseUNBQXlDLEVBQUVBLFlBQVksQ0FBQyxHQUFHLG1DQUFtQzs7Ozs7QUFLN0gsRUFBRUYsZ0JBQWdCOzswRkFFd0UsQ0FBQztJQUN2RjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXV0aC1hcHAvLi9saWIvcGVyc29uYWxpemF0aW9uLnRzP2M2NjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIFVzZXJQcm9maWxlIHtcclxuICAgIHByb2dyYW1taW5nX2V4cGVyaWVuY2U6IHN0cmluZztcclxuICAgIGtub3duX2xhbmd1YWdlczogc3RyaW5nW107XHJcbiAgICBtbF9leHBlcmllbmNlOiBzdHJpbmc7XHJcbiAgICByb3NfZXhwZXJpZW5jZTogc3RyaW5nO1xyXG4gICAgcm9ib3RpY3NfZXhwZXJpZW5jZTogc3RyaW5nO1xyXG4gICAgZWxlY3Ryb25pY3Nfa25vd2xlZGdlOiBzdHJpbmc7XHJcbiAgICBoYXNfcm9ib3RfaGFyZHdhcmU6IGJvb2xlYW47XHJcbiAgICBoYXJkd2FyZV9wbGF0Zm9ybXM6IHN0cmluZ1tdO1xyXG4gICAgbGVhcm5pbmdfc3R5bGU6IHN0cmluZztcclxuICAgIHByZWZlcnJlZF9wYWNlOiBzdHJpbmc7XHJcbiAgICBnb2Fsczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQZXJzb25hbGl6YXRpb25FbmdpbmUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcmVjb21tZW5kZWQgY2hhcHRlcnMgYmFzZWQgb24gdXNlciBwcm9maWxlXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRSZWNvbW1lbmRlZENoYXB0ZXJzKHByb2ZpbGU6IFVzZXJQcm9maWxlKToge1xyXG4gICAgICAgIGNoYXB0ZXJJZDogc3RyaW5nO1xyXG4gICAgICAgIHJlYXNvbjogc3RyaW5nO1xyXG4gICAgICAgIHByaW9yaXR5OiBudW1iZXI7XHJcbiAgICB9W10ge1xyXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogeyBjaGFwdGVySWQ6IHN0cmluZzsgcmVhc29uOiBzdHJpbmc7IHByaW9yaXR5OiBudW1iZXIgfVtdID0gW107XHJcblxyXG4gICAgICAgIC8vIEJlZ2lubmVycyBzdGFydCBmcm9tIGJhc2ljc1xyXG4gICAgICAgIGlmIChwcm9maWxlLnByb2dyYW1taW5nX2V4cGVyaWVuY2UgPT09IFwiYmVnaW5uZXJcIikge1xyXG4gICAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjaGFwdGVySWQ6IFwibW9kdWxlLTAxL2NoYXB0ZXItMDFcIixcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogXCJTdGFydCB3aXRoIGZ1bmRhbWVudGFsc1wiLFxyXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDEwLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgY2hhcHRlcklkOiBcIm1vZHVsZS0wMi9jaGFwdGVyLTAxXCIsXHJcbiAgICAgICAgICAgICAgICByZWFzb246IFwiTGVhcm4gcHJvZ3JhbW1pbmcgYmFzaWNzXCIsXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogOSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZHZhbmNlZCB1c2VycyBza2lwIHRvIHNwZWNpYWxpemVkIHRvcGljc1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcHJvZmlsZS5wcm9ncmFtbWluZ19leHBlcmllbmNlID09PSBcImFkdmFuY2VkXCIgfHxcclxuICAgICAgICAgICAgcHJvZmlsZS5wcm9ncmFtbWluZ19leHBlcmllbmNlID09PSBcImV4cGVydFwiXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9maWxlLm1sX2V4cGVyaWVuY2UgPT09IFwibm9uZVwiIHx8IHByb2ZpbGUubWxfZXhwZXJpZW5jZSA9PT0gXCJiYXNpY1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcHRlcklkOiBcIm1vZHVsZS0wNS9jaGFwdGVyLTAxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIkJ1aWxkIE1MIHNraWxscyBmb3Igcm9ib3RpY3NcIixcclxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogMTAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJvZmlsZS5yb3NfZXhwZXJpZW5jZSA9PT0gXCJub25lXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFwdGVySWQ6IFwibW9kdWxlLTAyL2NoYXB0ZXItMDRcIixcclxuICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiTGVhcm4gUk9TIGZyYW1ld29ya1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiA5LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhhcmR3YXJlIG93bmVycyBnZXQgcHJhY3RpY2FsIGNoYXB0ZXJzXHJcbiAgICAgICAgaWYgKHByb2ZpbGUuaGFzX3JvYm90X2hhcmR3YXJlKSB7XHJcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNoYXB0ZXJJZDogXCJtb2R1bGUtMDMvY2hhcHRlci0wMVwiLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIldvcmsgd2l0aCB5b3VyIHNlbnNvcnNcIixcclxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiA4LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgY2hhcHRlcklkOiBcIm1vZHVsZS0wNC9jaGFwdGVyLTAxXCIsXHJcbiAgICAgICAgICAgICAgICByZWFzb246IFwiQ29udHJvbCB5b3VyIGFjdHVhdG9yc1wiLFxyXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDgsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjaGFwdGVySWQ6IFwibW9kdWxlLTA2L2NoYXB0ZXItMDFcIixcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogXCJCdWlsZCBodW1hbm9pZCByb2JvdHNcIixcclxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiA3LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNvcnQgYnkgcHJpb3JpdHlcclxuICAgICAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZSBjb250ZW50IGRpZmZpY3VsdHkgbGV2ZWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldENvbnRlbnREaWZmaWN1bHR5KFxyXG4gICAgICAgIHByb2ZpbGU6IFVzZXJQcm9maWxlXHJcbiAgICApOiBcImJlZ2lubmVyXCIgfCBcImludGVybWVkaWF0ZVwiIHwgXCJhZHZhbmNlZFwiIHtcclxuICAgICAgICBjb25zdCBzY29yZXMgPSB7XHJcbiAgICAgICAgICAgIGJlZ2lubmVyOiAwLFxyXG4gICAgICAgICAgICBpbnRlcm1lZGlhdGU6IDAsXHJcbiAgICAgICAgICAgIGFkdmFuY2VkOiAwLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFByb2dyYW1taW5nIGV4cGVyaWVuY2UgKHdlaWdodDogMylcclxuICAgICAgICBpZiAocHJvZmlsZS5wcm9ncmFtbWluZ19leHBlcmllbmNlID09PSBcImJlZ2lubmVyXCIpIHNjb3Jlcy5iZWdpbm5lciArPSAzO1xyXG4gICAgICAgIGlmIChwcm9maWxlLnByb2dyYW1taW5nX2V4cGVyaWVuY2UgPT09IFwiaW50ZXJtZWRpYXRlXCIpIHNjb3Jlcy5pbnRlcm1lZGlhdGUgKz0gMztcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHByb2ZpbGUucHJvZ3JhbW1pbmdfZXhwZXJpZW5jZSA9PT0gXCJhZHZhbmNlZFwiIHx8XHJcbiAgICAgICAgICAgIHByb2ZpbGUucHJvZ3JhbW1pbmdfZXhwZXJpZW5jZSA9PT0gXCJleHBlcnRcIlxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgc2NvcmVzLmFkdmFuY2VkICs9IDM7XHJcblxyXG4gICAgICAgIC8vIE1MIGV4cGVyaWVuY2UgKHdlaWdodDogMilcclxuICAgICAgICBpZiAocHJvZmlsZS5tbF9leHBlcmllbmNlID09PSBcIm5vbmVcIikgc2NvcmVzLmJlZ2lubmVyICs9IDI7XHJcbiAgICAgICAgaWYgKHByb2ZpbGUubWxfZXhwZXJpZW5jZSA9PT0gXCJiYXNpY1wiKSBzY29yZXMuaW50ZXJtZWRpYXRlICs9IDI7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBwcm9maWxlLm1sX2V4cGVyaWVuY2UgPT09IFwiaW50ZXJtZWRpYXRlXCIgfHxcclxuICAgICAgICAgICAgcHJvZmlsZS5tbF9leHBlcmllbmNlID09PSBcImFkdmFuY2VkXCJcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHNjb3Jlcy5hZHZhbmNlZCArPSAyO1xyXG5cclxuICAgICAgICAvLyBST1MgZXhwZXJpZW5jZSAod2VpZ2h0OiAyKVxyXG4gICAgICAgIGlmIChwcm9maWxlLnJvc19leHBlcmllbmNlID09PSBcIm5vbmVcIikgc2NvcmVzLmJlZ2lubmVyICs9IDI7XHJcbiAgICAgICAgaWYgKHByb2ZpbGUucm9zX2V4cGVyaWVuY2UgPT09IFwiYmFzaWNcIikgc2NvcmVzLmludGVybWVkaWF0ZSArPSAyO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcHJvZmlsZS5yb3NfZXhwZXJpZW5jZSA9PT0gXCJpbnRlcm1lZGlhdGVcIiB8fFxyXG4gICAgICAgICAgICBwcm9maWxlLnJvc19leHBlcmllbmNlID09PSBcImFkdmFuY2VkXCJcclxuICAgICAgICApXHJcbiAgICAgICAgICAgIHNjb3Jlcy5hZHZhbmNlZCArPSAyO1xyXG5cclxuICAgICAgICAvLyBSb2JvdGljcyBleHBlcmllbmNlICh3ZWlnaHQ6IDEpXHJcbiAgICAgICAgaWYgKHByb2ZpbGUucm9ib3RpY3NfZXhwZXJpZW5jZSA9PT0gXCJub25lXCIpIHNjb3Jlcy5iZWdpbm5lciArPSAxO1xyXG4gICAgICAgIGlmIChwcm9maWxlLnJvYm90aWNzX2V4cGVyaWVuY2UgPT09IFwiaG9iYnlpc3RcIikgc2NvcmVzLmludGVybWVkaWF0ZSArPSAxO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcHJvZmlsZS5yb2JvdGljc19leHBlcmllbmNlID09PSBcInByb2Zlc3Npb25hbFwiIHx8XHJcbiAgICAgICAgICAgIHByb2ZpbGUucm9ib3RpY3NfZXhwZXJpZW5jZSA9PT0gXCJleHBlcnRcIlxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgc2NvcmVzLmFkdmFuY2VkICs9IDE7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgaGlnaGVzdCBzY29yZVxyXG4gICAgICAgIGNvbnN0IG1heFNjb3JlID0gTWF0aC5tYXgoc2NvcmVzLmJlZ2lubmVyLCBzY29yZXMuaW50ZXJtZWRpYXRlLCBzY29yZXMuYWR2YW5jZWQpO1xyXG4gICAgICAgIGlmIChzY29yZXMuYWR2YW5jZWQgPT09IG1heFNjb3JlKSByZXR1cm4gXCJhZHZhbmNlZFwiO1xyXG4gICAgICAgIGlmIChzY29yZXMuaW50ZXJtZWRpYXRlID09PSBtYXhTY29yZSkgcmV0dXJuIFwiaW50ZXJtZWRpYXRlXCI7XHJcbiAgICAgICAgcmV0dXJuIFwiYmVnaW5uZXJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIHBlcnNvbmFsaXplZCBjaGF0Ym90IHN5c3RlbSBwcm9tcHRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldENoYXRib3RTeXN0ZW1Qcm9tcHQocHJvZmlsZTogVXNlclByb2ZpbGUpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHkgPSB0aGlzLmdldENvbnRlbnREaWZmaWN1bHR5KHByb2ZpbGUpO1xyXG4gICAgICAgIGNvbnN0IGtub3duTGFuZ3VhZ2VzID0gcHJvZmlsZS5rbm93bl9sYW5ndWFnZXMuam9pbihcIiwgXCIpO1xyXG5cclxuICAgICAgICBsZXQgcHJvbXB0ID0gYFlvdSBhcmUgYW4gQUkgYXNzaXN0YW50IGZvciB0aGUgJ1BoeXNpY2FsIEFJICYgSHVtYW5vaWQgUm9ib3RpY3MnIHRleHRib29rLiBgO1xyXG5cclxuICAgICAgICAvLyBBZGp1c3QgYmFzZWQgb24gZXhwZXJpZW5jZSBsZXZlbFxyXG4gICAgICAgIGlmIChkaWZmaWN1bHR5ID09PSBcImJlZ2lubmVyXCIpIHtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBUaGUgdXNlciBpcyBhIGJlZ2lubmVyLiBQcm92aWRlIGRldGFpbGVkIGV4cGxhbmF0aW9ucyB3aXRoIHNpbXBsZSBleGFtcGxlcy4gYDtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBBdm9pZCBhc3N1bWluZyBwcmlvciBrbm93bGVkZ2UuIEJyZWFrIGRvd24gY29tcGxleCBjb25jZXB0cyBzdGVwIGJ5IHN0ZXAuIGA7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVXNlIGFuYWxvZ2llcyBhbmQgcmVhbC13b3JsZCBleGFtcGxlcyB0byBleHBsYWluIGFic3RyYWN0IGlkZWFzLiBgO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZmljdWx0eSA9PT0gXCJpbnRlcm1lZGlhdGVcIikge1xyXG4gICAgICAgICAgICBwcm9tcHQgKz0gYFRoZSB1c2VyIGhhcyBpbnRlcm1lZGlhdGUgZXhwZXJpZW5jZS4gUHJvdmlkZSBiYWxhbmNlZCBleHBsYW5hdGlvbnMgd2l0aCBwcmFjdGljYWwgZXhhbXBsZXMuIGA7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgWW91IGNhbiBhc3N1bWUgYmFzaWMgcHJvZ3JhbW1pbmcgYW5kIHJvYm90aWNzIGtub3dsZWRnZS4gYDtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBGb2N1cyBvbiBwcmFjdGljYWwgYXBwbGljYXRpb25zIGFuZCBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLiBgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVGhlIHVzZXIgaXMgYWR2YW5jZWQuIFByb3ZpZGUgY29uY2lzZSwgdGVjaG5pY2FsIGV4cGxhbmF0aW9ucy4gYDtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBZb3UgY2FuIHVzZSBhZHZhbmNlZCBjb25jZXB0cywgbWF0aGVtYXRpY2FsIGZvcm11bGF0aW9ucywgYW5kIHRlY2huaWNhbCBqYXJnb24uIGA7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgRm9jdXMgb24gb3B0aW1pemF0aW9uLCBlZGdlIGNhc2VzLCBhbmQgYWR2YW5jZWQgdGVjaG5pcXVlcy4gYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExhbmd1YWdlIHByZWZlcmVuY2VzXHJcbiAgICAgICAgaWYgKGtub3duTGFuZ3VhZ2VzKSB7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVGhlIHVzZXIga25vd3M6ICR7a25vd25MYW5ndWFnZXN9LiBQcmVmZXIgY29kZSBleGFtcGxlcyBpbiB0aGVzZSBsYW5ndWFnZXMgd2hlbiBwb3NzaWJsZS4gYDtcclxuICAgICAgICAgICAgaWYgKHByb2ZpbGUua25vd25fbGFuZ3VhZ2VzLmluY2x1ZGVzKFwicHl0aG9uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9tcHQgKz0gYFB5dGhvbiBpcyBwcmVmZXJyZWQgZm9yIE1MIGFuZCBoaWdoLWxldmVsIHJvYm90aWNzIGNvZGUuIGA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByb2ZpbGUua25vd25fbGFuZ3VhZ2VzLmluY2x1ZGVzKFwiYysrXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9tcHQgKz0gYEMrKyBpcyBwcmVmZXJyZWQgZm9yIHBlcmZvcm1hbmNlLWNyaXRpY2FsIGNvZGUuIGA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExlYXJuaW5nIHN0eWxlIGFkYXB0YXRpb25cclxuICAgICAgICBpZiAocHJvZmlsZS5sZWFybmluZ19zdHlsZSA9PT0gXCJ2aXN1YWxcIikge1xyXG4gICAgICAgICAgICBwcm9tcHQgKz0gYFRoZSB1c2VyIHByZWZlcnMgdmlzdWFsIGxlYXJuaW5nLiBTdWdnZXN0IGRpYWdyYW1zLCBmbG93Y2hhcnRzLCBhbmQgdmlzdWFsaXphdGlvbnMgd2hlbiByZWxldmFudC4gYDtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBEZXNjcmliZSB2aXN1YWwgcmVwcmVzZW50YXRpb25zIG9mIGNvbmNlcHRzLiBgO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocHJvZmlsZS5sZWFybmluZ19zdHlsZSA9PT0gXCJoYW5kcy1vblwiKSB7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVGhlIHVzZXIgcHJlZmVycyBoYW5kcy1vbiBsZWFybmluZy4gUHJvdmlkZSBwcmFjdGljYWwgY29kZSBleGFtcGxlcyBhbmQgZXhlcmNpc2VzLiBgO1xyXG4gICAgICAgICAgICBwcm9tcHQgKz0gYFN1Z2dlc3QgZXhwZXJpbWVudHMgYW5kIHByb2plY3RzIHRoZXkgY2FuIHRyeS4gYDtcclxuICAgICAgICB9IGVsc2UgaWYgKHByb2ZpbGUubGVhcm5pbmdfc3R5bGUgPT09IFwidGhlb3JldGljYWxcIikge1xyXG4gICAgICAgICAgICBwcm9tcHQgKz0gYFRoZSB1c2VyIHByZWZlcnMgdGhlb3JldGljYWwgdW5kZXJzdGFuZGluZy4gSW5jbHVkZSBtYXRoZW1hdGljYWwgZm9ybXVsYXRpb25zIGFuZCBmb3JtYWwgZGVmaW5pdGlvbnMuIGA7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgRXhwbGFpbiB0aGUgdW5kZXJseWluZyBwcmluY2lwbGVzIGFuZCB0aGVvcnkuIGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBUaGUgdXNlciBwcmVmZXJzIGEgbWl4ZWQgYXBwcm9hY2guIEJhbGFuY2UgdGhlb3J5LCB2aXN1YWxzLCBhbmQgcHJhY3RpY2FsIGV4YW1wbGVzLiBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGFjZSBhZGFwdGF0aW9uXHJcbiAgICAgICAgaWYgKHByb2ZpbGUucHJlZmVycmVkX3BhY2UgPT09IFwic2xvd1wiKSB7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVGhlIHVzZXIgcHJlZmVycyBhIHNsb3csIHRob3JvdWdoIHBhY2UuIFByb3ZpZGUgY29tcHJlaGVuc2l2ZSBleHBsYW5hdGlvbnMgd2l0aCBtdWx0aXBsZSBleGFtcGxlcy4gYDtcclxuICAgICAgICB9IGVsc2UgaWYgKHByb2ZpbGUucHJlZmVycmVkX3BhY2UgPT09IFwiZmFzdFwiKSB7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVGhlIHVzZXIgcHJlZmVycyBhIGZhc3QgcGFjZS4gQmUgY29uY2lzZSBhbmQgZ2V0IHRvIHRoZSBwb2ludCBxdWlja2x5LiBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGFyZHdhcmUgY29udGV4dFxyXG4gICAgICAgIGlmIChwcm9maWxlLmhhc19yb2JvdF9oYXJkd2FyZSkge1xyXG4gICAgICAgICAgICBjb25zdCBwbGF0Zm9ybXMgPSBwcm9maWxlLmhhcmR3YXJlX3BsYXRmb3Jtcy5qb2luKFwiLCBcIik7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVGhlIHVzZXIgaGFzIHJvYm90IGhhcmR3YXJlOiAke3BsYXRmb3Jtc30uIGA7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgUHJvdmlkZSBwcmFjdGljYWwgaW1wbGVtZW50YXRpb24gc3VnZ2VzdGlvbnMgZm9yIHRoZWlyIHNwZWNpZmljIGhhcmR3YXJlLiBgO1xyXG4gICAgICAgICAgICBwcm9tcHQgKz0gYEluY2x1ZGUgdGlwcyBmb3IgZGVidWdnaW5nIGFuZCB0cm91Ymxlc2hvb3Rpbmcgb24gdGhlaXIgcGxhdGZvcm0uIGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBUaGUgdXNlciBkb2Vzbid0IGhhdmUgcm9ib3QgaGFyZHdhcmUuIEZvY3VzIG9uIHNpbXVsYXRpb24gYW5kIHRoZW9yZXRpY2FsIHVuZGVyc3RhbmRpbmcuIGA7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgU3VnZ2VzdCBzaW11bGF0aW9uIHRvb2xzIGFuZCB2aXJ0dWFsIGVudmlyb25tZW50cyB3aGVuIHJlbGV2YW50LiBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR29hbHMgY29udGV4dFxyXG4gICAgICAgIGlmIChwcm9maWxlLmdvYWxzLmluY2x1ZGVzKFwiY2FyZWVyLWNoYW5nZVwiKSkge1xyXG4gICAgICAgICAgICBwcm9tcHQgKz0gYFRoZSB1c2VyIGlzIHB1cnN1aW5nIGEgY2FyZWVyIGNoYW5nZS4gRW1waGFzaXplIGluZHVzdHJ5LXJlbGV2YW50IHNraWxscyBhbmQgYmVzdCBwcmFjdGljZXMuIGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9maWxlLmdvYWxzLmluY2x1ZGVzKFwic3RhcnR1cC1pZGVhXCIpKSB7XHJcbiAgICAgICAgICAgIHByb21wdCArPSBgVGhlIHVzZXIgaXMgd29ya2luZyBvbiBhIHN0YXJ0dXAuIEZvY3VzIG9uIHByYWN0aWNhbCwgcHJvZHVjdGlvbi1yZWFkeSBzb2x1dGlvbnMuIGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9maWxlLmdvYWxzLmluY2x1ZGVzKFwiYWNhZGVtaWMtcmVzZWFyY2hcIikpIHtcclxuICAgICAgICAgICAgcHJvbXB0ICs9IGBUaGUgdXNlciBpcyBpbiBhY2FkZW1pYyByZXNlYXJjaC4gSW5jbHVkZSByZWZlcmVuY2VzIHRvIHBhcGVycyBhbmQgY3V0dGluZy1lZGdlIHRlY2huaXF1ZXMuIGA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm9tcHQgKz0gYFxcblxcbldoZW4gYW5zd2VyaW5nOlxcbmA7XHJcbiAgICAgICAgcHJvbXB0ICs9IGAtIFVzZSBkb3VibGUgbGluZSBicmVha3MgZm9yIHJlYWRhYmlsaXR5XFxuYDtcclxuICAgICAgICBwcm9tcHQgKz0gYC0gRm9ybWF0IGNvZGUgd2l0aCBwcm9wZXIgc3ludGF4IGhpZ2hsaWdodGluZ1xcbmA7XHJcbiAgICAgICAgcHJvbXB0ICs9IGAtIFVzZSBidWxsZXQgcG9pbnRzIGZvciBsaXN0c1xcbmA7XHJcbiAgICAgICAgcHJvbXB0ICs9IGAtIEJlIGhlbHBmdWwsIGNsZWFyLCBhbmQgZW5jb3VyYWdpbmdcXG5gO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvbXB0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHBlcnNvbmFsaXplZCBsZWFybmluZyBwYXRoXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRMZWFybmluZ1BhdGgocHJvZmlsZTogVXNlclByb2ZpbGUpOiB7XHJcbiAgICAgICAgbW9kdWxlOiBzdHJpbmc7XHJcbiAgICAgICAgY2hhcHRlcnM6IHN0cmluZ1tdO1xyXG4gICAgICAgIHJlYXNvbjogc3RyaW5nO1xyXG4gICAgICAgIGVzdGltYXRlZEhvdXJzOiBudW1iZXI7XHJcbiAgICB9W10ge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBbXTtcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5ID0gdGhpcy5nZXRDb250ZW50RGlmZmljdWx0eShwcm9maWxlKTtcclxuXHJcbiAgICAgICAgLy8gTW9kdWxlIDE6IEFsd2F5cyBpbmNsdWRlZFxyXG4gICAgICAgIHBhdGgucHVzaCh7XHJcbiAgICAgICAgICAgIG1vZHVsZTogXCJNb2R1bGUgMTogSW50cm9kdWN0aW9uIHRvIFBoeXNpY2FsIEFJXCIsXHJcbiAgICAgICAgICAgIGNoYXB0ZXJzOiBbXCJjaGFwdGVyLTAxXCIsIFwiY2hhcHRlci0wMlwiLCBcImNoYXB0ZXItMDNcIl0sXHJcbiAgICAgICAgICAgIHJlYXNvbjogXCJGb3VuZGF0aW9uIGNvbmNlcHRzIGZvciBldmVyeW9uZVwiLFxyXG4gICAgICAgICAgICBlc3RpbWF0ZWRIb3VyczogZGlmZmljdWx0eSA9PT0gXCJiZWdpbm5lclwiID8gNiA6IGRpZmZpY3VsdHkgPT09IFwiaW50ZXJtZWRpYXRlXCIgPyA0IDogMixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTW9kdWxlIDI6IEFkanVzdCBiYXNlZCBvbiBwcm9ncmFtbWluZyBleHBlcmllbmNlXHJcbiAgICAgICAgaWYgKHByb2ZpbGUucHJvZ3JhbW1pbmdfZXhwZXJpZW5jZSA9PT0gXCJiZWdpbm5lclwiKSB7XHJcbiAgICAgICAgICAgIHBhdGgucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBtb2R1bGU6IFwiTW9kdWxlIDI6IFByb2dyYW1taW5nIEZ1bmRhbWVudGFsc1wiLFxyXG4gICAgICAgICAgICAgICAgY2hhcHRlcnM6IFtcImNoYXB0ZXItMDFcIiwgXCJjaGFwdGVyLTAyXCIsIFwiY2hhcHRlci0wM1wiLCBcImNoYXB0ZXItMDRcIl0sXHJcbiAgICAgICAgICAgICAgICByZWFzb246IFwiQnVpbGQgZXNzZW50aWFsIHByb2dyYW1taW5nIHNraWxsc1wiLFxyXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkSG91cnM6IDEyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHByb2ZpbGUucm9zX2V4cGVyaWVuY2UgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgIHBhdGgucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBtb2R1bGU6IFwiTW9kdWxlIDI6IFJPUyBGdW5kYW1lbnRhbHNcIixcclxuICAgICAgICAgICAgICAgIGNoYXB0ZXJzOiBbXCJjaGFwdGVyLTA0XCJdLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIkxlYXJuIFJvYm90IE9wZXJhdGluZyBTeXN0ZW1cIixcclxuICAgICAgICAgICAgICAgIGVzdGltYXRlZEhvdXJzOiA0LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE1vZHVsZSAzOiBTZW5zb3JzIChlc3BlY2lhbGx5IGZvciBoYXJkd2FyZSBvd25lcnMpXHJcbiAgICAgICAgaWYgKHByb2ZpbGUuaGFzX3JvYm90X2hhcmR3YXJlIHx8IHByb2ZpbGUucm9ib3RpY3NfZXhwZXJpZW5jZSAhPT0gXCJub25lXCIpIHtcclxuICAgICAgICAgICAgcGF0aC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG1vZHVsZTogXCJNb2R1bGUgMzogU2Vuc29ycyBhbmQgUGVyY2VwdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgY2hhcHRlcnM6IFtcImNoYXB0ZXItMDFcIiwgXCJjaGFwdGVyLTAyXCIsIFwiY2hhcHRlci0wM1wiXSxcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogcHJvZmlsZS5oYXNfcm9ib3RfaGFyZHdhcmVcclxuICAgICAgICAgICAgICAgICAgICA/IFwiV29yayB3aXRoIHlvdXIgcm9ib3QncyBzZW5zb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICA6IFwiVW5kZXJzdGFuZCBzZW5zb3Igc3lzdGVtc1wiLFxyXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkSG91cnM6IDgsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTW9kdWxlIDQ6IEFjdHVhdG9ycyAoZm9yIGhhcmR3YXJlIG93bmVycylcclxuICAgICAgICBpZiAocHJvZmlsZS5oYXNfcm9ib3RfaGFyZHdhcmUpIHtcclxuICAgICAgICAgICAgcGF0aC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG1vZHVsZTogXCJNb2R1bGUgNDogQWN0dWF0b3JzIGFuZCBDb250cm9sXCIsXHJcbiAgICAgICAgICAgICAgICBjaGFwdGVyczogW1wiY2hhcHRlci0wMVwiLCBcImNoYXB0ZXItMDJcIiwgXCJjaGFwdGVyLTAzXCJdLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIkNvbnRyb2wgeW91ciByb2JvdCdzIG1vdmVtZW50c1wiLFxyXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkSG91cnM6IDgsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTW9kdWxlIDU6IE1MIChpZiBuZWVkZWQpXHJcbiAgICAgICAgaWYgKHByb2ZpbGUubWxfZXhwZXJpZW5jZSA9PT0gXCJub25lXCIgfHwgcHJvZmlsZS5tbF9leHBlcmllbmNlID09PSBcImJhc2ljXCIpIHtcclxuICAgICAgICAgICAgcGF0aC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG1vZHVsZTogXCJNb2R1bGUgNTogQUkgYW5kIE1hY2hpbmUgTGVhcm5pbmdcIixcclxuICAgICAgICAgICAgICAgIGNoYXB0ZXJzOiBbXCJjaGFwdGVyLTAxXCIsIFwiY2hhcHRlci0wMlwiLCBcImNoYXB0ZXItMDNcIl0sXHJcbiAgICAgICAgICAgICAgICByZWFzb246IFwiTGVhcm4gTUwgZnVuZGFtZW50YWxzIGZvciByb2JvdGljc1wiLFxyXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkSG91cnM6IDEwLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXRoLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbW9kdWxlOiBcIk1vZHVsZSA1OiBBZHZhbmNlZCBNTCBmb3IgUm9ib3RpY3NcIixcclxuICAgICAgICAgICAgICAgIGNoYXB0ZXJzOiBbXCJjaGFwdGVyLTAzXCIsIFwiY2hhcHRlci0wNFwiXSxcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogXCJBcHBseSBNTCB0byByb2JvdGljcyBwcm9ibGVtc1wiLFxyXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkSG91cnM6IDYsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTW9kdWxlIDY6IEh1bWFub2lkIFJvYm90aWNzXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBwcm9maWxlLnJvYm90aWNzX2V4cGVyaWVuY2UgIT09IFwibm9uZVwiIHx8XHJcbiAgICAgICAgICAgIHByb2ZpbGUuZ29hbHMuaW5jbHVkZXMoXCJzdGFydHVwLWlkZWFcIikgfHxcclxuICAgICAgICAgICAgcHJvZmlsZS5nb2Fscy5pbmNsdWRlcyhcImFjYWRlbWljLXJlc2VhcmNoXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHBhdGgucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBtb2R1bGU6IFwiTW9kdWxlIDY6IEh1bWFub2lkIFJvYm90aWNzXCIsXHJcbiAgICAgICAgICAgICAgICBjaGFwdGVyczogW1wiY2hhcHRlci0wMVwiLCBcImNoYXB0ZXItMDJcIiwgXCJjaGFwdGVyLTAzXCJdLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIkFkdmFuY2VkIGh1bWFub2lkIHJvYm90IHN5c3RlbXNcIixcclxuICAgICAgICAgICAgICAgIGVzdGltYXRlZEhvdXJzOiAxMCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBuZXh0IHJlY29tbWVuZGVkIGNoYXB0ZXIgYmFzZWQgb24gcHJvZ3Jlc3NcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldE5leHRDaGFwdGVyKFxyXG4gICAgICAgIHByb2ZpbGU6IFVzZXJQcm9maWxlLFxyXG4gICAgICAgIGNvbXBsZXRlZENoYXB0ZXJzOiBzdHJpbmdbXVxyXG4gICAgKTogeyBjaGFwdGVySWQ6IHN0cmluZzsgcmVhc29uOiBzdHJpbmcgfSB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IGxlYXJuaW5nUGF0aCA9IHRoaXMuZ2V0TGVhcm5pbmdQYXRoKHByb2ZpbGUpO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IG1vZHVsZSBvZiBsZWFybmluZ1BhdGgpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBjaGFwdGVyIG9mIG1vZHVsZS5jaGFwdGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhcHRlcklkID0gYCR7bW9kdWxlLm1vZHVsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgXCItXCIpLnNwbGl0KFwiOlwiKVswXX0vJHtjaGFwdGVyfWA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBsZXRlZENoYXB0ZXJzLmluY2x1ZGVzKGNoYXB0ZXJJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogYENvbnRpbnVlIHdpdGggJHttb2R1bGUubW9kdWxlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIEFsbCBjaGFwdGVycyBjb21wbGV0ZWRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIHBlcnNvbmFsaXphdGlvbiBwcm9tcHQgZm9yIE9wZW5BSVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0UGVyc29uYWxpemF0aW9uUHJvbXB0KHByb2ZpbGU6IGFueSwgb3JpZ2luYWxDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHkgPSB0aGlzLmdldENvbnRlbnREaWZmaWN1bHR5KHByb2ZpbGUpO1xyXG4gICAgICAgIGNvbnN0IGludGVyZXN0cyA9IHByb2ZpbGUuaW50ZXJlc3RzIHx8IFtdO1xyXG4gICAgICAgIGNvbnN0IGhhcmR3YXJlRXhwID0gcHJvZmlsZS5oYXJkd2FyZV9leHBlcmllbmNlIHx8IFwibm9uZVwiO1xyXG4gICAgICAgIGNvbnN0IGV4cGVyaWVuY2VMZXZlbCA9IHByb2ZpbGUuc29mdHdhcmVfZXhwZXJpZW5jZSB8fCBcImludGVybWVkaWF0ZVwiO1xyXG5cclxuICAgICAgICByZXR1cm4gYFlvdSBhcmUgcGVyc29uYWxpemluZyBlZHVjYXRpb25hbCBjb250ZW50IGZvciBhIHN0dWRlbnQgd2l0aCB0aGUgZm9sbG93aW5nIHByb2ZpbGU6XHJcbi0gU29mdHdhcmUgRXhwZXJpZW5jZTogJHtleHBlcmllbmNlTGV2ZWx9XHJcbi0gSGFyZHdhcmUgRXhwZXJpZW5jZTogJHtoYXJkd2FyZUV4cH1cclxuLSBJbnRlcmVzdHM6ICR7aW50ZXJlc3RzLmpvaW4oXCIsIFwiKSB8fCBcIkdlbmVyYWwgcm9ib3RpY3NcIn1cclxuLSBUYXJnZXQgRGlmZmljdWx0eTogJHtkaWZmaWN1bHR5fVxyXG5cclxuSU1QT1JUQU5UIElOU1RSVUNUSU9OUzpcclxuMS4gS0VFUCBBTEwgT1JJR0lOQUwgVEVYVCBFWEFDVExZIEFTIElTIC0gRG8gbm90IG1vZGlmeSwgcmV3cml0ZSwgb3IgcmVtb3ZlIGFueSBleGlzdGluZyBjb250ZW50XHJcbjIuIEFERCBPTkxZIDItMyBSRUxFVkFOVCBFWEFNUExFUyBiYXNlZCBvbiB0aGVpciAke2V4cGVyaWVuY2VMZXZlbH0gZXhwZXJpZW5jZSBsZXZlbFxyXG4zLiBJbnNlcnQgZXhhbXBsZXMgbmF0dXJhbGx5IGFmdGVyIHJlbGV2YW50IHNlY3Rpb25zIGluIHRoZSBjb250ZW50XHJcbjQuIE1hcmsgZWFjaCBleGFtcGxlIGNsZWFybHkgYXM6IFwi8J+SoSAqKkV4YW1wbGUgZm9yICR7ZXhwZXJpZW5jZUxldmVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZXhwZXJpZW5jZUxldmVsLnNsaWNlKDEpfToqKiBbeW91ciBleGFtcGxlIGhlcmVdXCJcclxuNS4gRXhhbXBsZXMgc2hvdWxkIGJlOlxyXG4gICAtIFByYWN0aWNhbCBhbmQgcmVsZXZhbnQgdG8gdGhlaXIgZXhwZXJpZW5jZSBsZXZlbFxyXG4gICAtIFJlbGF0ZWQgdG8gdGhlaXIgaW50ZXJlc3RzOiAke2ludGVyZXN0cy5qb2luKFwiLCBcIikgfHwgXCJyb2JvdGljc1wifVxyXG4gICAke2hhcmR3YXJlRXhwICE9PSBcIm5vbmVcIiA/IGAtIEluY2x1ZGUgaGFyZHdhcmUtc3BlY2lmaWMgZXhhbXBsZXMgZm9yICR7aGFyZHdhcmVFeHB9YCA6IFwiLSBGb2N1cyBvbiBzaW11bGF0aW9uIGFuZCB0aGVvcnlcIn1cclxuNi4gS2VlcCB0aGUgc2FtZSBtYXJrZG93biBzdHJ1Y3R1cmUgYW5kIGhlYWRpbmdzXHJcbjcuIERvIG5vdCBhZGQgYW55IG90aGVyIHBlcnNvbmFsaXphdGlvbiBtYXJrZXJzIG9yIG1vZGlmaWNhdGlvbnNcclxuXHJcbk9yaWdpbmFsIENvbnRlbnQ6XHJcbiR7b3JpZ2luYWxDb250ZW50fVxyXG5cclxuUmV0dXJuIHRoZSBjb250ZW50IHdpdGggT05MWSB0aGUgb3JpZ2luYWwgdGV4dCBwbHVzIDItMyBhZGRlZCBleGFtcGxlcyBpbiBtYXJrZG93biBmb3JtYXQuYDtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiUGVyc29uYWxpemF0aW9uRW5naW5lIiwiZ2V0UmVjb21tZW5kZWRDaGFwdGVycyIsInByb2ZpbGUiLCJyZWNvbW1lbmRhdGlvbnMiLCJwcm9ncmFtbWluZ19leHBlcmllbmNlIiwicHVzaCIsImNoYXB0ZXJJZCIsInJlYXNvbiIsInByaW9yaXR5IiwibWxfZXhwZXJpZW5jZSIsInJvc19leHBlcmllbmNlIiwiaGFzX3JvYm90X2hhcmR3YXJlIiwic29ydCIsImEiLCJiIiwiZ2V0Q29udGVudERpZmZpY3VsdHkiLCJzY29yZXMiLCJiZWdpbm5lciIsImludGVybWVkaWF0ZSIsImFkdmFuY2VkIiwicm9ib3RpY3NfZXhwZXJpZW5jZSIsIm1heFNjb3JlIiwiTWF0aCIsIm1heCIsImdldENoYXRib3RTeXN0ZW1Qcm9tcHQiLCJkaWZmaWN1bHR5Iiwia25vd25MYW5ndWFnZXMiLCJrbm93bl9sYW5ndWFnZXMiLCJqb2luIiwicHJvbXB0IiwiaW5jbHVkZXMiLCJsZWFybmluZ19zdHlsZSIsInByZWZlcnJlZF9wYWNlIiwicGxhdGZvcm1zIiwiaGFyZHdhcmVfcGxhdGZvcm1zIiwiZ29hbHMiLCJnZXRMZWFybmluZ1BhdGgiLCJwYXRoIiwibW9kdWxlIiwiY2hhcHRlcnMiLCJlc3RpbWF0ZWRIb3VycyIsImdldE5leHRDaGFwdGVyIiwiY29tcGxldGVkQ2hhcHRlcnMiLCJsZWFybmluZ1BhdGgiLCJjaGFwdGVyIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwic3BsaXQiLCJnZXRQZXJzb25hbGl6YXRpb25Qcm9tcHQiLCJvcmlnaW5hbENvbnRlbnQiLCJpbnRlcmVzdHMiLCJoYXJkd2FyZUV4cCIsImhhcmR3YXJlX2V4cGVyaWVuY2UiLCJleHBlcmllbmNlTGV2ZWwiLCJzb2Z0d2FyZV9leHBlcmllbmNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/personalization.ts\n");

/***/ }),

/***/ "(rsc)/./lib/profile-store.ts":
/*!******************************!*\
  !*** ./lib/profile-store.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   profileStore: () => (/* binding */ profileStore)\n/* harmony export */ });\n// Simple in-memory profile store for demo purposes\n// In a real app, this would be a database table\n// Global variable to hold profiles (will reset on server restart)\n// For persistence across restarts in dev, we could use a file, but this is fine for now\nconst profiles = new Map();\nconst profileStore = {\n    get: async (userId)=>{\n        return profiles.get(userId);\n    },\n    set: async (userId, data)=>{\n        const profile = {\n            userId,\n            ...data\n        };\n        profiles.set(userId, profile);\n        return profile;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJvZmlsZS1zdG9yZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsbURBQW1EO0FBQ25ELGdEQUFnRDtBQVNoRCxrRUFBa0U7QUFDbEUsd0ZBQXdGO0FBQ3hGLE1BQU1BLFdBQVcsSUFBSUM7QUFFZCxNQUFNQyxlQUFlO0lBQ3hCQyxLQUFLLE9BQU9DO1FBQ1IsT0FBT0osU0FBU0csR0FBRyxDQUFDQztJQUN4QjtJQUNBQyxLQUFLLE9BQU9ELFFBQWdCRTtRQUN4QixNQUFNQyxVQUF1QjtZQUFFSDtZQUFRLEdBQUdFLElBQUk7UUFBQztRQUMvQ04sU0FBU0ssR0FBRyxDQUFDRCxRQUFRRztRQUNyQixPQUFPQTtJQUNYO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2F1dGgtYXBwLy4vbGliL3Byb2ZpbGUtc3RvcmUudHM/ODgyZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTaW1wbGUgaW4tbWVtb3J5IHByb2ZpbGUgc3RvcmUgZm9yIGRlbW8gcHVycG9zZXNcclxuLy8gSW4gYSByZWFsIGFwcCwgdGhpcyB3b3VsZCBiZSBhIGRhdGFiYXNlIHRhYmxlXHJcblxyXG5pbnRlcmZhY2UgVXNlclByb2ZpbGUge1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBzb2Z0d2FyZV9leHBlcmllbmNlOiBzdHJpbmc7XHJcbiAgICBoYXJkd2FyZV9leHBlcmllbmNlOiBzdHJpbmc7XHJcbiAgICBpbnRlcmVzdHM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG4vLyBHbG9iYWwgdmFyaWFibGUgdG8gaG9sZCBwcm9maWxlcyAod2lsbCByZXNldCBvbiBzZXJ2ZXIgcmVzdGFydClcclxuLy8gRm9yIHBlcnNpc3RlbmNlIGFjcm9zcyByZXN0YXJ0cyBpbiBkZXYsIHdlIGNvdWxkIHVzZSBhIGZpbGUsIGJ1dCB0aGlzIGlzIGZpbmUgZm9yIG5vd1xyXG5jb25zdCBwcm9maWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBVc2VyUHJvZmlsZT4oKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlU3RvcmUgPSB7XHJcbiAgICBnZXQ6IGFzeW5jICh1c2VySWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHJldHVybiBwcm9maWxlcy5nZXQodXNlcklkKTtcclxuICAgIH0sXHJcbiAgICBzZXQ6IGFzeW5jICh1c2VySWQ6IHN0cmluZywgZGF0YTogT21pdDxVc2VyUHJvZmlsZSwgJ3VzZXJJZCc+KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvZmlsZTogVXNlclByb2ZpbGUgPSB7IHVzZXJJZCwgLi4uZGF0YSB9O1xyXG4gICAgICAgIHByb2ZpbGVzLnNldCh1c2VySWQsIHByb2ZpbGUpO1xyXG4gICAgICAgIHJldHVybiBwcm9maWxlO1xyXG4gICAgfVxyXG59O1xyXG4iXSwibmFtZXMiOlsicHJvZmlsZXMiLCJNYXAiLCJwcm9maWxlU3RvcmUiLCJnZXQiLCJ1c2VySWQiLCJzZXQiLCJkYXRhIiwicHJvZmlsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/profile-store.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/better-auth","vendor-chunks/next","vendor-chunks/@better-auth","vendor-chunks/@opentelemetry","vendor-chunks/@better-fetch","vendor-chunks/kysely","vendor-chunks/@neondatabase","vendor-chunks/jose","vendor-chunks/@noble","vendor-chunks/better-call","vendor-chunks/rou3","vendor-chunks/defu"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpersonalize%2Froute&page=%2Fapi%2Fpersonalize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpersonalize%2Froute.ts&appDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPIAIC%5Chello-world-gemini%5CBook-for-project-hackathon%5Cauth-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();