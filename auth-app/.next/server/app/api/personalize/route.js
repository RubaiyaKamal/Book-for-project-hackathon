"use strict";(()=>{var e={};e.id=161,e.ids=[161],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1664:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var a={};t.r(a),t.d(a,{POST:()=>p});var n=t(9303),o=t(8716),i=t(670),s=t(7070);class c{static getRecommendedChapters(e){let r=[];return"beginner"===e.programming_experience&&(r.push({chapterId:"module-01/chapter-01",reason:"Start with fundamentals",priority:10}),r.push({chapterId:"module-02/chapter-01",reason:"Learn programming basics",priority:9})),("advanced"===e.programming_experience||"expert"===e.programming_experience)&&(("none"===e.ml_experience||"basic"===e.ml_experience)&&r.push({chapterId:"module-05/chapter-01",reason:"Build ML skills for robotics",priority:10}),"none"===e.ros_experience&&r.push({chapterId:"module-02/chapter-04",reason:"Learn ROS framework",priority:9})),e.has_robot_hardware&&(r.push({chapterId:"module-03/chapter-01",reason:"Work with your sensors",priority:8}),r.push({chapterId:"module-04/chapter-01",reason:"Control your actuators",priority:8}),r.push({chapterId:"module-06/chapter-01",reason:"Build humanoid robots",priority:7})),r.sort((e,r)=>r.priority-e.priority)}static getContentDifficulty(e){let r={beginner:0,intermediate:0,advanced:0};"beginner"===e.programming_experience&&(r.beginner+=3),"intermediate"===e.programming_experience&&(r.intermediate+=3),("advanced"===e.programming_experience||"expert"===e.programming_experience)&&(r.advanced+=3),"none"===e.ml_experience&&(r.beginner+=2),"basic"===e.ml_experience&&(r.intermediate+=2),("intermediate"===e.ml_experience||"advanced"===e.ml_experience)&&(r.advanced+=2),"none"===e.ros_experience&&(r.beginner+=2),"basic"===e.ros_experience&&(r.intermediate+=2),("intermediate"===e.ros_experience||"advanced"===e.ros_experience)&&(r.advanced+=2),"none"===e.robotics_experience&&(r.beginner+=1),"hobbyist"===e.robotics_experience&&(r.intermediate+=1),("professional"===e.robotics_experience||"expert"===e.robotics_experience)&&(r.advanced+=1);let t=Math.max(r.beginner,r.intermediate,r.advanced);return r.advanced===t?"advanced":r.intermediate===t?"intermediate":"beginner"}static getChatbotSystemPrompt(e){let r=this.getContentDifficulty(e),t=e.known_languages.join(", "),a="You are an AI assistant for the 'Physical AI & Humanoid Robotics' textbook. ";if("beginner"===r?a+="The user is a beginner. Provide detailed explanations with simple examples. Avoid assuming prior knowledge. Break down complex concepts step by step. Use analogies and real-world examples to explain abstract ideas. ":"intermediate"===r?a+="The user has intermediate experience. Provide balanced explanations with practical examples. You can assume basic programming and robotics knowledge. Focus on practical applications and implementation details. ":a+="The user is advanced. Provide concise, technical explanations. You can use advanced concepts, mathematical formulations, and technical jargon. Focus on optimization, edge cases, and advanced techniques. ",t&&(a+=`The user knows: ${t}. Prefer code examples in these languages when possible. `,e.known_languages.includes("python")&&(a+="Python is preferred for ML and high-level robotics code. "),e.known_languages.includes("c++")&&(a+="C++ is preferred for performance-critical code. ")),"visual"===e.learning_style?a+="The user prefers visual learning. Suggest diagrams, flowcharts, and visualizations when relevant. Describe visual representations of concepts. ":"hands-on"===e.learning_style?a+="The user prefers hands-on learning. Provide practical code examples and exercises. Suggest experiments and projects they can try. ":"theoretical"===e.learning_style?a+="The user prefers theoretical understanding. Include mathematical formulations and formal definitions. Explain the underlying principles and theory. ":a+="The user prefers a mixed approach. Balance theory, visuals, and practical examples. ","slow"===e.preferred_pace?a+="The user prefers a slow, thorough pace. Provide comprehensive explanations with multiple examples. ":"fast"===e.preferred_pace&&(a+="The user prefers a fast pace. Be concise and get to the point quickly. "),e.has_robot_hardware){let r=e.hardware_platforms.join(", ");a+=`The user has robot hardware: ${r}. Provide practical implementation suggestions for their specific hardware. Include tips for debugging and troubleshooting on their platform. `}else a+="The user doesn't have robot hardware. Focus on simulation and theoretical understanding. Suggest simulation tools and virtual environments when relevant. ";return e.goals.includes("career-change")&&(a+="The user is pursuing a career change. Emphasize industry-relevant skills and best practices. "),e.goals.includes("startup-idea")&&(a+="The user is working on a startup. Focus on practical, production-ready solutions. "),e.goals.includes("academic-research")&&(a+="The user is in academic research. Include references to papers and cutting-edge techniques. "),a+=`

When answering:
- Use double line breaks for readability
- Format code with proper syntax highlighting
- Use bullet points for lists
- Be helpful, clear, and encouraging
`}static getLearningPath(e){let r=[],t=this.getContentDifficulty(e);return r.push({module:"Module 1: Introduction to Physical AI",chapters:["chapter-01","chapter-02","chapter-03"],reason:"Foundation concepts for everyone",estimatedHours:"beginner"===t?6:"intermediate"===t?4:2}),"beginner"===e.programming_experience?r.push({module:"Module 2: Programming Fundamentals",chapters:["chapter-01","chapter-02","chapter-03","chapter-04"],reason:"Build essential programming skills",estimatedHours:12}):"none"===e.ros_experience&&r.push({module:"Module 2: ROS Fundamentals",chapters:["chapter-04"],reason:"Learn Robot Operating System",estimatedHours:4}),(e.has_robot_hardware||"none"!==e.robotics_experience)&&r.push({module:"Module 3: Sensors and Perception",chapters:["chapter-01","chapter-02","chapter-03"],reason:e.has_robot_hardware?"Work with your robot's sensors":"Understand sensor systems",estimatedHours:8}),e.has_robot_hardware&&r.push({module:"Module 4: Actuators and Control",chapters:["chapter-01","chapter-02","chapter-03"],reason:"Control your robot's movements",estimatedHours:8}),"none"===e.ml_experience||"basic"===e.ml_experience?r.push({module:"Module 5: AI and Machine Learning",chapters:["chapter-01","chapter-02","chapter-03"],reason:"Learn ML fundamentals for robotics",estimatedHours:10}):r.push({module:"Module 5: Advanced ML for Robotics",chapters:["chapter-03","chapter-04"],reason:"Apply ML to robotics problems",estimatedHours:6}),("none"!==e.robotics_experience||e.goals.includes("startup-idea")||e.goals.includes("academic-research"))&&r.push({module:"Module 6: Humanoid Robotics",chapters:["chapter-01","chapter-02","chapter-03"],reason:"Advanced humanoid robot systems",estimatedHours:10}),r}static getNextChapter(e,r){for(let t of this.getLearningPath(e))for(let e of t.chapters){let a=`${t.module.toLowerCase().replace(/\s+/g,"-").split(":")[0]}/${e}`;if(!r.includes(a))return{chapterId:a,reason:`Continue with ${t.module}`}}return null}static getPersonalizationPrompt(e,r){let t=this.getContentDifficulty(e),a=e.interests||[],n=e.hardware_experience||"none";return`You are personalizing educational content for a student with the following profile:
- Software Experience: ${e.software_experience||"beginner"}
- Hardware Experience: ${n}
- Interests: ${a.join(", ")||"General robotics"}
- Target Difficulty: ${t}

Personalize the following chapter content while:
1. Adjusting complexity to ${t} level
2. Adding examples relevant to their interests: ${a.join(", ")}
3. ${"none"!==n?`Including practical examples for ${n}`:"Focusing on simulation and theory"}
4. Keeping the same structure and headings
5. Maintaining all code examples but adjusting comments and explanations
6. Adding personalized tips in this format: "ðŸ’¡ **Personalized Tip:** [tip]"
7. Making explanations match their experience level

Original Content:
${r}

Return the personalized content in markdown format.`}}async function p(e){try{let r=e.headers.get("authorization");if(!r||!r.startsWith("Bearer "))return s.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.substring(7),a=await fetch("http://127.0.0.1:8000/auth/me",{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)return s.NextResponse.json({error:"Unauthorized"},{status:401});let n=(await a.json()).profile;if(!n)return s.NextResponse.json({error:"Profile not found. Please complete onboarding."},{status:404});let{chapterId:o,originalContent:i}=await e.json();if(!o||!i)return s.NextResponse.json({error:"Missing chapterId or originalContent"},{status:400});let p=await l(i,n);return s.NextResponse.json({success:!0,personalizedContent:p,profile:{difficulty:c.getContentDifficulty(n),interests:n.interests||[],hardwareExperience:n.hardware_experience}})}catch(e){return console.error("Personalization error:",e),s.NextResponse.json({error:"Failed to personalize content"},{status:500})}}async function l(e,r){let t=c.getPersonalizationPrompt(r,e),a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.OPENAI_API_KEY}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:t}],temperature:.7,max_tokens:4e3})});if(!a.ok){let e=await a.text();throw Error(`OpenAI API error: ${a.statusText}. Details: ${e}`)}return(await a.json()).choices[0].message.content}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/personalize/route",pathname:"/api/personalize",filename:"route",bundlePath:"app/api/personalize/route"},resolvedPagePath:"E:\\PIAIC\\hello-world-gemini\\Book-for-project-hackathon\\auth-app\\app\\api\\personalize\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:h,serverHooks:m}=d,g="/api/personalize/route";function f(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,972],()=>t(1664));module.exports=a})();